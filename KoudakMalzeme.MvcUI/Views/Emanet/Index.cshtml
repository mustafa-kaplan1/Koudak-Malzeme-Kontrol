@model List<KoudakMalzeme.Shared.Entities.Emanet>
@{
	ViewData["Title"] = "Aktif Emanetler";
}

<h2 class="text-success mb-4"><i class="fa-solid fa-list-check"></i> Aktif Emanet Listesi</h2>

<div class="card shadow-sm border-0">
	<div class="card-body">
		<table class="table table-hover align-middle">
			<thead class="table-light">
				<tr>
					<th>Emanet No</th>
					<th>Üye</th>
					<th>Veriliş Tarihi</th>
					<th>Durum</th>
					<th>İşlem</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var item in Model)
				{
					<tr>
						<td>#@item.Id</td>
						<td>
							<span class="fw-bold">@item.Uye?.Ad @item.Uye?.Soyad</span><br />
							<small class="text-muted">@item.Uye?.OkulNo</small>
						</td>
						<td>@item.TeslimAlmaTarihi.ToString("dd.MM.yyyy HH:mm")</td>
						<td>
							@if (item.Durum == KoudakMalzeme.Shared.Enums.EmanetDurumu.TeslimEdildi)
							{
								<span class="badge bg-warning text-dark">Teslim Edildi (Bekliyor)</span>
							}
							else if (item.Durum == KoudakMalzeme.Shared.Enums.EmanetDurumu.KismenIadeEdildi)
							{
								<span class="badge bg-info">Kısmen İade</span>
							}
							else
							{
								<span class="badge bg-danger">Gecikmede</span>
							}
						</td>
						<td>
							<a asp-action="IadeAl" asp-route-id="@item.Id" class="btn btn-sm btn-outline-success">
								<i class="fa-solid fa-rotate-left"></i> İade Al / Detay
							</a>
						</td>
					</tr>
				}
			</tbody>
		</table>

		@if (Model.Count == 0)
		{
			<div class="alert alert-info mt-3">Şu an aktif bir emanet kaydı bulunmuyor.</div>
		}
	</div>
</div>